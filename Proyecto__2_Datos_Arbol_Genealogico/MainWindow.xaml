<Window x:Class="Proyecto__2_Datos_Arbol_Genealogico.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:Proyecto__2_Datos_Arbol_Genealogico.Models"
        Title="Árbol Genealógico - Proyecto" Height="720" Width="1100"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="380"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left panel: Form -->
        <Border Grid.Column="0" CornerRadius="8" Padding="12" Background="#FFF7F9FB" BorderBrush="#FFDDDDDD" BorderThickness="1">
            <StackPanel>
                <TextBlock Text="Agregar nuevo miembro" FontSize="18" FontWeight="Bold" Margin="0,0,0,8"/>
                <StackPanel Orientation="Horizontal">
                    <Image x:Name="PreviewPhoto" Width="96" Height="96" Stretch="UniformToFill" Margin="0,0,12,0" />
                    <StackPanel>
                        <Button x:Name="BtnLoadPhoto" Content="Cargar foto..." Click="BtnLoadPhoto_Click" />
                        <TextBlock Text="Recomendado: cara centrada, 300x300" FontSize="11" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Margin="0,10,0,0">
                    <TextBlock Text="Nombre" />
                    <TextBox x:Name="TxtFirstName" TextChanged="TxtFirstName_TextChanged"/>
                    <TextBlock Text="Apellido" Margin="0,6,0,0"/>
                    <TextBox x:Name="TxtLastName"/>
                    <TextBlock Text="Cédula" Margin="0,6,0,0"/>
                    <TextBox x:Name="TxtCedula"/>
                    <Grid Margin="0,6,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Latitud" />
                            <TextBox x:Name="TxtLat" />
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                            <TextBlock Text="Longitud" />
                            <TextBox x:Name="TxtLon" />
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Fecha de nacimiento" Margin="0,6,0,0"/>
                    <DatePicker x:Name="DpDob"/>
                    <TextBlock Text="Fecha de muerte (opcional)" Margin="0,6,0,0"/>
                    <DatePicker x:Name="DpDod"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,8,0,0">
                        <Button x:Name="BtnAdd" Content="Agregar miembro" Click="BtnAdd_Click" />
                        <Button x:Name="BtnOpenMap" Content="Abrir mapa" Click="BtnOpenMap_Click" Margin="8,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Right panel: TreeView and stats -->
        <Grid Grid.Column="1" Margin="12,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="260"/>
            </Grid.RowDefinitions>

            <Border CornerRadius="8" Padding="8" Background="White" BorderBrush="#FFDDDDDD" BorderThickness="1">
                <DockPanel>
                    <TextBlock Text="Árbol genealógico (vista)" FontSize="16" FontWeight="Bold" DockPanel.Dock="Top" Margin="2"/>
                    <TreeView x:Name="TreeViewFamily" Margin="4" />
                </DockPanel>
            </Border>

            <Border Grid.Row="1" CornerRadius="8" Padding="8" Background="#FFF7F9FB" BorderBrush="#FFDDDDDD" BorderThickness="1" Margin="0,12,0,0">
                <StackPanel>
                    <TextBlock Text="Estadísticas de distancias" FontWeight="Bold" FontSize="14"/>
                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <TextBlock Text="Máxima distancia (km): " FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtMaxPair" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="Mínima distancia (km): " FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtMinPair" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="Distancia promedio (km): " FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtAvg" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <Button Content="Reconstruir grafo de ubicaciones" Click="BtnRebuildGraph_Click" />
                        <Button Content="Guardar JSON" Click="BtnSaveJson_Click" Margin="8,0,0,0"/>
                        <Button Content="Cargar JSON" Click="BtnLoadJson_Click" Margin="8,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

    </Grid>
</Window>
